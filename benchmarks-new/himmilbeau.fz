#include "float_ops/mulfp64.fz"
#include "float_ops/addfp64.fz"
#include "float_ops/subfp64.fz"


function himmilbeau
   (x1' : ![2.0]num) (x2 : ![2.0]num)
{
  // x1 * x1
  let [x1] = x1';
  let [x2] = x1';
  lb a1 = mulfp64(x1,x1) in
  // (x1 * x1) + x2
  lb a2 = addfp64(|a1,x2|) in
  // ((x1 * x1) + x2) - 11
  lb a3 = subfp64(|a2, 11.0|) in

  // (b (- (+ x1 (* x2 x2)) 7))
  // x2 * x2
  lb a4 = mulfp64(x2, x2) in
  lb a5 = addfp64(|x1, a4|) in
  lb a6 = subfp64(|a5, 7|) in

  lb a7 = mulfp64(a3, a3) in
  lb a8 = mulfp64(a6, a6) in
  addfp64(|a7, a8|)
}

himmilbeau[-5,5][-5,5]
