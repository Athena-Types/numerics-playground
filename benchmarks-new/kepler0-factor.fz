#include "float_ops/mulfp64.fz"
#include "float_ops/addfp64.fz"
#include "float_ops/subfp64.fz"
#include "float_ops/minus.fz"

function kepler0_factor 
  (x1' : ![2.0]num)
  (x2' : ![3.0]num)
  (x3' : ![3.0]num)
  (x4 : num)
  (x5' : ![3.0]num)
  (x6' : ![3.0]num)
{
  let [x1] = x1';
  let [x2] = x2';
  let [x3] = x3';
  let [x5] = x5';
  let [x6] = x6';

  b2 = addfp64(|minus(x1), x2|);
  let c2 = b2;

  b3 = addfp64(|c2, x3|);
  let c3 = b3;

  b4 = subfp64(|c3, x4|);
  let c4 = b4;
  
  b5 = addfp64(|c4, x5|);
  let c5 = b5;

  b6 = addfp64(|c5, x6|);
  let c6 = b6;

  let fin_factor = factor|
    lb f7 = factor|
      lb f5 = factor|
        lb a3 = factor|
          mulfp64(x2, x5), 
          mulfp64(x3, x6) | in 
        addfp64(a3), 
      mulfp64(x2, x3) | in 
      subfp64(f5), 
      mulfp64(x5, x6) | in
    subfp64(f7),
    mulfp64(x1, c6)
  |;
  addfp64(fin_factor)
}

kepler0_factor[4,6.36][4,6.36][4,6.36][4,6.36][4,6.36][4,6.36]
