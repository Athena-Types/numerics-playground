#include "float_ops/mulfp64.fz"
#include "float_ops/addfp64.fz"
#include "float_ops/subfp64.fz"
#include "float_ops/minus.fz"

function rigidBody2 
 (x1' : ![2.0]num)
 (x2' : ![4.0]num)
 (x3' : ![6.0]num)
{
  let [x1] = x1';
  let [x2] = x2';
  let [x3] = x3';

  lb a13_factor = factor|
    lb a10_factor = factor|
      lb a6_factor = factor|
        lb a1 = mulfp64(2.0, x1) in
        lb a2 = mulfp64(a1, x2) in
        // (* (* (* 2 x1) x2) x3)
        mulfp64(a2, x3),
        lb a4 = mulfp64(3.0, x3) in
        // (* (* 3 x3) x3)
        mulfp64(a4, x3)
      | in
      // (+ (* (* (* 2 x1) x2) x3) (* (* 3 x3) x3))
      addfp64(a6_factor),
      lb a7 = mulfp64(x2, x1) in
      lb a8 = mulfp64(a7, x2) in
      // (* (* (* x2 x1) x2) x3)
      mulfp64(a8, x3)
    | in
    // (- (+ (* (* (* 2 x1) x2) x3) (* (* 3 x3) x3)) (* (* (* x2 x1) x2) x3))
    subfp64(a10_factor),
    lb a11 = mulfp64(3.0, x3) in
    // (* (* 3 x3) x3)
    mulfp64(a11, x3)
  | in

  // + _ _
  lb a13 = addfp64(a13_factor) in
  // - _ _
  subfp64(|a13, x2|)
}

rigidBody2[-15,15][-15,15][-15,15]
